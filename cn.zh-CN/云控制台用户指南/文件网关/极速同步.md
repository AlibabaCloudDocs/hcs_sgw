# 极速同步

您可以使用极速同步功能，将OSS Bucket中的数据变化极速同步至所有通过文件网关连接至该Bucket的本地客户端。

-   已创建文件网关并添加缓存，具体操作，请参见[创建文件网关](/cn.zh-CN/云控制台用户指南/文件网关/管理文件网关.md)及[添加缓存](/cn.zh-CN/云控制台用户指南/文件网关/管理缓存.md)。
-   已创建OSS Bucket，具体操作，请参见[创建存储空间](/cn.zh-CN/快速入门/控制台快速入门/创建存储空间.md)。
-   已创建并配置了文件网关上的NFS或SMB共享，具体操作，请参见[管理共享](/cn.zh-CN/云控制台用户指南/文件网关/管理共享.md)。
-   已开通阿里云消息服务（MNS）并授权，具体操作，请参见[开通消息服务MNS]()。

使用极速同步功能，您可以将一个或多个连接至同一个OSS Bucket的共享加入一个同步组。对该 Bucket中数据进行的任何改动都会同步至该同步组中所有共享的本地客户端，从而无需单独对每个共享进行反向同步，提高数据同步的效率和准确性。

**说明：** 目前标准型、增强型、性能型的云存储网关以及本地云存储网关支持极速同步功能。

极速同步功能依赖于阿里云消息服务MNS实现，因此使用极速同步会产生MNS服务的费用。

MNS 的费用由主题（Topic）和队列（Queue）两部分组成，并按天进行计费。每个极速同步组按照一个Topic进行计费，每个加入同步组的共享都会按一个Queue进行计费。在API调用情况小于2,000万次的情况下，每个Topic的单价为2元/天，Queue的单价为0.5元/天。假设您创建了1个同步组，并将2个共享加入了该同步组，则每月的费用为 （2+0.5 x 2）x 30 = 90元。计费详情，请参见 [MNS 定价页面](https://cn.aliyun.com/price/product?spm=5176.7944397.207973.oss3.28b7b241YpZtk8#/mns/detail)。

## 创建同步组

要使用极速同步功能，您需要创建一个同步组并将要进行同步的共享加入该同步组。

1.  登录[云存储网关控制台](https://sgwnew.console.aliyun.com/)。

2.  在控制台的左上角，选择目标文件网关所在的区域。

3.  单击**极速同步**。

4.  在**同步组列表**页面中，单击右上角的**创建**。

5.  在**创建同步组**对话框的**基本信息**页签，配置以下项目，然后单击**下一步**。

    |配置项|说明|
    |---|--|
    |**同步组名称**|输入同步组的名称。 **说明：** 同步组名称的最大长度为128个字符，可以包含大小写字母、中文、数字、英文句号（.）、下划线（\_）或（-），同时必须以大小写字母或者中文开头。 |
    |**OSS区域**|选择OSS Bucket所在的区域。|
    |**Bucket名称**|选择要设置同步的OSS Bucket名称。一个同步组只能设定一个OSS Bucket，所有对该Bucket内数据进行的改动都会被同步至本地。 **说明：** 如果下拉列表为空，说明您还未创建任何连接至OSS Bucket的共享。请先创建文件网关与OSS Bucket之间的共享。详细步骤请参见[管理共享](/cn.zh-CN/云控制台用户指南/文件网关/管理共享.md)。 |
    |**Bucket子目录**|如果您要对Bucket特定子目录内的数据改动进行同步，可以选择需要的子目录。|

6.  在**创建同步组**对话框的**同步组设置**页签中，在左侧的**可选择共享**区域中选中想要添加至同步组的共享单击**\>**图标。选中的共享会被添加至**已选择共享**区域中，单击**下一步**。

    您也可以反向操作，在**已选择共享**区域中选中某个共享，然后单击**<**图标，将该共享移出同步组。

    **说明：** 将NFS共享加入同步组后，为更快地在本地客户端看到同步结果，在将共享挂载至客户端时需要增加noac参数，具体操作，请参见[访问NFS共享目录](/cn.zh-CN/云控制台用户指南/文件网关/访问共享目录/访问NFS共享目录.md)中的示例。

7.  在**创建同步组**对话框的**总结**页签中，确认同步组的信息，然后单击**完成**。


## 管理同步组

创建同步组后，对OSS Bucket中数据进行的任何改动都会自动同步至该同步组中所有共享的本地客户端。您还可以对同步组进行以下操作。

-   查看同步组详情

    您可以在**同步组列表**页面单击**同步组名称**列的名称或同步组右侧**操作**列的**详情**，查看同步组的详情页面。

    在**同步组详情**对话框，您可以查看同步组的详细信息。您还可以在右上角选择![](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/2385459951/p68714.png)图标（列表）或![](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/2385459951/p68715.png)图标（地图）的形式查看同步组详情。除同步组与加入该组的共享的基本信息外，**同步组详情**对话框的列表页面中还包含了以下信息。

    |项目|说明|
    |--|--|
    |**消息主题名称**|指该同步组在阿里云消息服务MNS中对应的消息主题（Topic）名称 。|
    |**共享状态**|指该共享目前的同步状态，共有以下几种可能的状态：     -   **全量同步等待中**：表示该共享首次加入该同步组，正在等待进行首次全量同步。
    -   **全量同步进行中**：表示该共享的全量同步正在进行中。
    -   **同步正常**：表示该共享目前的同步状态正常。
    -   **极速同步未开启**：表示该共享未开启极速同步功能。
    -   **消息队列无法访问**：表示该共享对应的消息队列无法访问。
    -   **消息主题无法访问**：表示该共享对应的消息主题无法访问。
    -   **消息队列消息主题无法访问**：表示该共享对应的消息队列和消息主题均无法访问。 |
    |**消息队列名称**|指该共享在阿里云消息服务MNS中对应的消息队列（Queue）名称 。|

-   添加或移除同步组中的共享

    您可以单击同步组右侧**操作**列的**设置**，然后在**设置同步组**对话框内添加或移除同步组中的共享，方法与创建同步组时的步骤6相同。

-   删除同步组

    如果您想要删除一个同步组，可以单击该同步组右侧**操作**列的**删除**，然后在确认对话框中单击**确认**。


